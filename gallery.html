<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>MetaToRI NFT 갤러리</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; }
    .card { cursor: pointer; border: 1px solid #ccc; padding: 5px; text-align: center; }
    .card img { width: 100%; aspect-ratio: 1/1; object-fit: cover; }
    #popup { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; }
    #popup img { max-width: 80%; max-height: 80%; }
  </style>
</head>
<body>
  <h2>내 NFT 갤러리</h2>
  <button id="logout">로그아웃</button>
  <div class="grid" id="gallery"></div>

  <div id="popup"><img id="popupImg"><div style="color:white;" id="popupText"></div></div>

  <script type="module">
    import { auth, checkAuth } from './firebase.js';
    import { signOut } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";

    checkAuth();

    const gallery = document.getElementById("gallery");
    const popup = document.getElementById("popup");
    const popupImg = document.getElementById("popupImg");
    const popupText = document.getElementById("popupText");

    const nfts = Array.from({length: 12}).map((_, i) => ({
      id: i+1,
      img: "https://raw.githubusercontent.com/pageno/MetaToRI-Assets/main/King.png",
      title: "하늘을 나는 용의 왕 #" + (i+1),
      desc: "구름 위에 앉아 있는 귀여운 메타토리 왕의 NFT입니다."
    }));

    nfts.forEach(nft => {
      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `<img src="${nft.img}"><br>#${nft.id}`;
      card.onclick = () => {
        popup.style.display = "flex";
        popupImg.src = nft.img;
        popupText.textContent = nft.title + " - " + nft.desc;
      };
      gallery.appendChild(card);
    });

    popup.onclick = () => popup.style.display = "none";
    document.getElementById("logout").onclick = () => signOut(auth).then(()=>location.href="index.html");
  </script>
</body>
</html>
